<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <!--css de mapa-->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
      integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
      crossorigin=""
    />
    <!--libreria leaflet-->
    <script
      src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
      integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
      crossorigin=""
    ></script>
    <!--estilos propios-->
    <style>
      #map {
        height: 400px;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
  </body>
  <script>
    var map = L.map("map").setView([43.548288, -5.663882], 15);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      id: "mapbox/streets-v11"
    }).addTo(map);

    //bus
    var bus = {
      idlinea: 1,
      idtrayecto: 1,
      idautobus: "315",
      utmx: 283132,
      utmy: 4824060,
      horaactualizacion: "12:19:17",
      fechaactualizacion: "2020-02-04T00:00:00",
      idparada: 34,
      minutos: 0,
      distancia: 0.0,
      matricula: "0513-DTZ",
      modelo: "MAN NL 263 F",
      ordenparada: 30,
      idsiguienteparada: 0
    };

    //CREAMOS ICONOS PERSONALIZADOS CON LA MISMA CLASE
    var smile = L.Icon.extend({
      options: {
        iconSize: [38, 38],
        iconAnchor: [22, 22],
        popupAnchor: [-3, -76]
      }
    });
    //CREAMOS VARIOS DE LA MISMA CLASE
    var smileVerde = new smile({ iconUrl: "./markers/smile.png" });

    //LOS USAMOS EN NUESTRO MARCADOR
    L.marker([43.547488, -5.664682], { icon: smileVerde }).addTo(map);
    //CREAMOS UNA ZONA CON GEOJSON
    var geojsonFeature = {
      type: "Feature",
      properties: {
        name: "Coors Field",
        amenity: "Baseball Stadium",
        popupContent: "This is where the Rockies play!"
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [-5.665705204010009, 43.548579215553715],
            [-5.666134357452393, 43.54836148273069],
            [-5.666692256927489, 43.5480504344763],
            [-5.666756629943848, 43.54773938461675],
            [-5.666670799255371, 43.54744388576339],
            [-5.666155815124512, 43.54691509472605],
            [-5.665705204010009, 43.54660403900772],
            [-5.665340423583984, 43.54619966417421],
            [-5.664782524108886, 43.5457486275058],
            [-5.664374828338623, 43.54542201263917],
            [-5.664246082305907, 43.5447843308945],
            [-5.6641387939453125, 43.54425551652645],
            [-5.66394567489624, 43.5440377680854],
            [-5.663645267486572, 43.54430217680434],
            [-5.663022994995117, 43.54450437092454],
            [-5.6624436378479, 43.54451992429033],
            [-5.661671161651611, 43.544457710803165],
            [-5.661606788635254, 43.54484654404458],
            [-5.661413669586182, 43.54514205563071],
            [-5.660855770111083, 43.5454375657682],
            [-5.660340785980224, 43.54568641528668],
            [-5.660126209259033, 43.54588860476404],
            [-5.660362243652343, 43.54605968763826],
            [-5.660405158996581, 43.54655738051152],
            [-5.660276412963867, 43.54713283277381],
            [-5.660297870635986, 43.547474990974074],
            [-5.660383701324462, 43.547786042198005],
            [-5.660662651062012, 43.5483303779775],
            [-5.661005973815918, 43.5486258724849],
            [-5.661349296569823, 43.548828052102664],
            [-5.661993026733398, 43.548828052102664],
            [-5.662679672241211, 43.54890581331352],
            [-5.663108825683594, 43.5492790657292],
            [-5.663967132568359, 43.54941903478917],
            [-5.664932727813721, 43.54938793058171],
            [-5.665597915649414, 43.54917020068007],
            [-5.665705204010009, 43.548579215553715]
          ]
        ]
      }
    };

    //LA AÃ‘ADIMOS AL MAPA
    var geo = L.geoJSON(geojsonFeature).addTo(map);

    geo.bindPopup(geojsonFeature.properties.popupContent).addTo(map);
  </script>
</html>
